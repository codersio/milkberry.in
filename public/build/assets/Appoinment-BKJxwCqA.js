import{r as i,j as e}from"./app-C1sFr5Jl.js";import{S as R,H}from"./sidebar-BgpZ4ZOw.js";import{F as O}from"./index-Dz5fGuO7.js";import{R as T}from"./index-Cvp_4XLo.js";import{P as $}from"./patientsmodal-B4jBV9cr.js";import{S as G}from"./sweetalert2.all-CfYHLfZw.js";import"./index-CL7JO-sE.js";import"./index-4ASejIE9.js";const X=({admin:c,id:V})=>{const[m,y]=i.useState(!0),[p,N]=i.useState(!0),[v,b]=i.useState([]),[w,_]=i.useState([]),[S,C]=i.useState([]),[D,k]=i.useState([]),[a,x]=i.useState({patient_id:"",admin_id:c.id,admin_type:c.type,shift:"",doctor:"",doctor_fees:"",appoinment_date:"",slot:"",appoinment_priority:"",payment_mode:"",status:"",message:"",address:"",live_consultant:"",department:""}),[l,o]=i.useState({}),[h,F]=i.useState(1),[u,P]=i.useState("");let A=(t,s)=>{t.preventDefault(),axios.post(`/api/admin/appoinment-status-update/${s}`,{status:h}).then(n=>{console.log(n.data),d()}).catch(n=>{console.error("Error updating post:",n)})},E=(t,s)=>{t.preventDefault(),axios.post(`/api/admin/appoinment-status-update/${s}`,{statuspending:u}).then(n=>{console.log(n.data),d()}).catch(n=>{console.error("Error updating post:",n)})};const r=t=>{const{name:s,value:n}=t.target;x({...a,[s]:n}),o({...l,[s]:""})},f=async()=>{try{const t=await axios.get("/api/admin/patient-fetch");b(t.data)}catch(t){console.error("Error fetching data:",t)}},d=async()=>{try{const t=await axios.post("/api/admin/appoinment-fetch");console.log(t.data),_(t.data)}catch(t){console.error("Error fetching data:",t)}},q=async()=>{try{const t=await axios.post("/api/admin/doctor-fetch");console.log(t.data),C(t.data)}catch(t){console.error("Error fetching data:",t)}},M=async()=>{try{const t=await axios.post("/api/admin/departmentFetch");console.log(t.data),k(t.data)}catch(t){console.error("Error fetching data:",t)}};i.useEffect(()=>{f(),d(),q(),M()},[]);const L=async t=>{t.preventDefault();const s={};if(!a.patient_id.trim())s.patient_id="Patients name is required",o(s);else if(!a.doctor.trim())s.doctor="Doctor is required",o(s);else if(!a.shift.trim())s.shift="Shift is required",o(s);else if(!a.doctor_fees.trim())s.doctor_fees="Doctor Fees is required",o(s);else if(!a.appoinment_date.trim())s.appoinment_date="Appointment Datee is required",o(s);else if(!a.slot.trim())s.slot="Slot is required",o(s);else try{await axios.post("/api/admin/appoinment-store",a),x({patient_id:"",shift:"",doctor:"",doctor_fees:"",appoinment_date:"",slot:"",appoinment_priority:"",payment_mode:"",status:"",message:"",address:"",live_consultant:"",department:""}),d(),G.fire({icon:"success",title:"Success!",text:"Form submitted successfully!"})}catch(n){console.log(n)}},j=()=>{y(!m)},g=()=>{N(!p)};return e.jsxs("div",{className:"flex h-screen",children:[e.jsx("div",{className:"bg-gray-800 text-white w-[11%] flex-shrink-0",children:e.jsx(R,{})}),e.jsxs("div",{className:"flex-grow bg-gray-100 ",children:[e.jsx(H,{}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"card mt-2",children:e.jsxs("div",{className:"card-header flex justify-between px-[3rem] border py-3",children:[e.jsx("div",{className:"grid place-items-center text-[18px]",children:e.jsx("h1",{children:"Appointment Details"})}),e.jsxs("button",{type:"button",onClick:j,className:"bg-gray-700 p-2 text-white rounded-md flex space-x-2",children:[e.jsx("div",{className:"grid place-items-center mt-1",children:e.jsx(O,{})}),e.jsx("h1",{children:"Add Appointment"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Live Consultant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alternate Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(t=>e.jsxs("tr",{className:"px-6 py-3 ",children:[e.jsxs("td",{className:"px-6 py-3 text-left",children:[" ",t.name]}),e.jsxs("td",{className:"px-6 py-3 text-left",children:[" ",t.appoinment_no]}),e.jsxs("td",{className:"px-6 py-3 text-left",children:[" ",t.appoinment_date]}),e.jsxs("td",{className:"px-6 py-3 text-left",children:[" ",t.phone]}),e.jsxs("td",{className:"px-6 py-3 text-left",children:[" ",t.gender]}),e.jsxs("td",{className:"px-6 py-3 text-left",children:[" ",t.doctor]}),e.jsx("td",{}),e.jsxs("td",{className:"px-6 py-3 text-left",children:[" ",t.appoinment_priority]}),e.jsxs("td",{className:"px-6 py-3 text-left",children:[" ",t.live_consultant]}),e.jsxs("td",{className:"px-6 py-3 text-left",children:[" ",t.address]}),e.jsxs("td",{className:"px-6 py-3 text-left",children:[e.jsx("input",{type:"hidden",name:"status",value:h,onChange:s=>F(s.target.value),placeholder:"Title"}),e.jsx("input",{type:"hidden",name:"status",value:u,onChange:s=>P(s.target.value),placeholder:"Title"}),t.status==null?e.jsx("button",{className:"bg-yellow-500 p-1 rounded-sm text-white",type:"button",onClick:s=>A(s,t.id),children:"pending"}):e.jsx("button",{className:"bg-green-500 p-1 rounded-sm text-white",type:"button",onClick:s=>E(s,t.id),children:"approved"})]})]}))})]})}),e.jsxs("div",{id:"exampleModal",className:m?"  fixed h-screen transform  bg-black shadow-md rounded-md g  top-0 bottom-0 right-0 left-0 w-full hidden":"fixed h-screen transform  bg-black bg-opacity-85 shadow-md rounded-md   top-0 bottom-0 right-0 left-0 w-full grid place-items-center",children:[e.jsxs("div",{className:"back-model w-[60%] bg-white relative ",children:[e.jsxs("div",{className:"modal-content w-full",children:[e.jsxs("div",{className:"modal-header grid grid-cols-2  bg-[#0E99F4] p-2",children:[e.jsxs("div",{className:"w-[80%] ",children:[e.jsxs("div",{className:"w-[80%] flex space-x-2 px-4 mt-[0.29rem]",children:[e.jsxs("select",{value:a.patient_id,onChange:r,name:"patient_id",id:!0,className:"w-[100%] h-9",children:[e.jsx("option",{value:"",children:"Select Patient"}),v.map(t=>e.jsx("option",{value:t.id,children:t.name}))]}),e.jsxs("button",{onClick:g,className:"bg-gray-700 w-[100%] h-9  text-white rounded-md",children:[" ",e.jsx("i",{className:"fa-solid fa-plus"}),"Add Patient"]})]}),l.patient_id&&e.jsx("span",{className:"text-red-500",children:l.patient_id})]}),e.jsx("div",{className:"flex mt-[0.40rem]",children:e.jsx("button",{onClick:j,className:"ml-auto text-[2rem] text-white",children:e.jsx(T,{})})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{action:!0,className:"w-full grid grid-cols-4 gap-3 px-6 mt-10 relative",children:[e.jsxs("div",{className:"form-group w-full ",children:[e.jsx("label",{htmlFor:!0,children:"Doctor *"}),e.jsx("input",{name:"admin_type",value:a.admin_type,onChange:r,type:"hidden",className:" border-gray-300 w-full"}),e.jsx("input",{name:"admin_id",value:a.admin_id,onChange:r,type:"hidden",className:" border-gray-300 w-full"}),e.jsxs("select",{name:"doctor",onChange:r,value:a.doctor,className:" border-gray-300 w-full",children:[e.jsx("option",{value:"",children:"Select doctor"}),S.map(t=>e.jsxs("option",{value:t.name,children:["	",t.name]}))]}),l.doctor&&e.jsx("span",{className:"text-red-500",children:l.doctor})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"Doctor Fees *"})," ",e.jsx("br",{}),e.jsx("input",{name:"doctor_fees",value:a.doctor_fees,onChange:r,type:"text",className:" border-gray-300 w-full"}),l.doctor_fees&&e.jsx("span",{className:"text-red-500",children:l.doctor_fees})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:" Shift *"})," ",e.jsx("br",{}),e.jsx("input",{name:"shift",value:a.shift,onChange:r,type:"text",className:" border-gray-300 w-full"}),l.shift&&e.jsx("span",{className:"text-red-500",children:l.shift})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"Appointment Date *"})," ",e.jsx("br",{}),e.jsx("input",{name:"appoinment_date",value:a.appoinment_date,onChange:r,type:"date",className:" border-gray-300 w-full"}),l.appoinment_date&&e.jsx("span",{className:"text-red-500",children:l.appoinment_date})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"Slot * "})," ",e.jsx("br",{}),e.jsx("input",{name:"slot",value:a.slot,onChange:r,type:"text",className:" border-gray-300 w-full"}),l.slot&&e.jsx("span",{className:"text-red-500",children:l.slot})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"Appointment Priority "})," ",e.jsx("br",{}),e.jsx("input",{name:"appoinment_priority",value:a.appoinment_priority,onChange:r,type:"text",className:" border-gray-300 w-full"})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"Payment Mode"})," ",e.jsx("br",{}),e.jsx("input",{name:"payment_mode",value:a.payment_mode,onChange:r,type:"text",className:" border-gray-300 w-full"})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"Status * "})," ",e.jsx("br",{}),e.jsxs("select",{name:"status",value:a.status,onChange:r,id:!0,className:"w-full border-gray-300",children:[e.jsx("option",{value:!0,children:"Select Status"}),e.jsx("option",{value:"",children:"pending"}),e.jsx("option",{value:"1",children:"approve"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 px-6 gap-3",children:[e.jsx("div",{children:e.jsxs("div",{className:"form-group w-full mt-4",children:[e.jsx("label",{htmlFor:!0,children:"Department"})," ",e.jsx("br",{}),e.jsxs("select",{name:"department",value:a.department,onChange:r,className:" border-gray-300 w-full",children:[e.jsx("option",{value:"",children:"Select Department"}),D.map(t=>e.jsx("option",{value:t.name,children:t.name}))]})]})}),e.jsx("div",{className:"content mt-4",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"Live Consultant (On Video Conference) *"})," ",e.jsx("br",{}),e.jsxs("select",{name:"live_consultant",value:a.live_consultant,onChange:r,id:!0,className:"w-full border-gray-300",children:[e.jsx("option",{value:!0,children:"Select Consultant"}),e.jsx("option",{value:"yes",children:"yes"}),e.jsx("option",{value:"No",children:"No"})]})]})})})]})]}),e.jsxs("div",{className:"form-group  mt-4 w-full ",children:[e.jsxs("div",{className:"form-group  mt-4 w-full  px-6",children:[e.jsx("label",{htmlFor:!0,children:"Message  "})," ",e.jsx("br",{}),e.jsx("textarea",{name:"message",value:a.message,onChange:r,id:!0,rows:3,className:"px-6 w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group  mt-4 w-full  px-6",children:[e.jsx("label",{htmlFor:!0,children:"Address  "})," ",e.jsx("br",{}),e.jsx("textarea",{name:"address",value:a.address,onChange:r,id:!0,rows:3,className:"px-6 w-full border-gray-300"})]}),e.jsx("div",{className:"form-group   bottom-0  left-0 right-0 mt-10 py-4",children:e.jsx("div",{className:"flex justify-end px-5 p-3 space-x-3 w-full",children:e.jsx("button",{onClick:L,className:"bg-gray-800 p-2 text-white w-[20%] ",children:"Save"})})})]})]}),e.jsx($,{Patientsmodal:p,handlePatients:g,fetchData:f})]})]})]})]})};export{X as default};
