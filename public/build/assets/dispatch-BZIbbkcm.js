import{r as d,j as e}from"./app-BIZ3IliG.js";import{S,H as A,c as M}from"./sidebar-CX1c2OX3.js";import{F as R}from"./index-Bj6Ssh9F.js";import{R as g}from"./index-CccxSFAp.js";import{f as E}from"./index-B4D-UyGZ.js";import"./index-kmbyLHGu.js";const V=({admin:o})=>{const[c,j]=d.useState(!0),[x,m]=d.useState(null),[_,z]=d.useState(o.type),[b,T]=d.useState(o.id),[h,y]=d.useState(""),[t,p]=d.useState({dis_name:"",dis_ref_no:"",dis_address:"",dis_note:"",recv_form_title:"",dis_date:"",dis_atach_file:""}),[v,w]=d.useState([]),l=s=>{const{name:r,value:a}=s.target;p({...t,[r]:a})},f=()=>{j(!c)},N=()=>{m(!x)},u=s=>{const{name:r,value:a,type:n,files:D}=s.target;D.length>0&&y(s.target.files[0])},i=()=>{axios.post("/api/admin/dispatch-fetch").then(s=>{console.log(s.data),w(s.data)}).catch(s=>{console.log(s)})};d.useEffect(()=>{i()},[]);const k=s=>{s.preventDefault();const r=new FormData;r.append("dis_name",t.dis_name),r.append(" admin_id",b),r.append("admin_type",_),r.append("dis_ref_no",t.dis_ref_no),r.append("dis_address",t.dis_address),r.append("dis_note",t.dis_note),r.append("dis_atach_file",h),r.append("dis_date",t.dis_date),axios.post("/api/admin/dispatch-store",r).then(a=>{console.log(a),i()}).catch(a=>console.log(a))},F=(s,r)=>{s.preventDefault(),axios.post(`/api/admin/dispatch-delete/${r}`).then(a=>{console.log(a),i()}).catch(a=>console.log(a))},C=(s,r)=>{s.preventDefault();const a=new FormData;a.append("dis_name",t.dis_name),a.append("dis_ref_no",t.dis_ref_no),a.append("dis_address",t.dis_address),a.append("dis_note",t.dis_note),a.append("dis_date",t.dis_date),a.append("dis_atach_file",h),axios.post(`/api/admin/dispatch-update/${r}`,a).then(n=>i()).catch(n=>console.log(n))};return e.jsxs("div",{className:"flex h-screen",children:[e.jsx("div",{className:"bg-gray-800 text-white w-[11%] flex-shrink-0",children:e.jsx(S,{})}),e.jsxs("div",{className:"flex-grow bg-gray-100 ",children:[e.jsx(A,{}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"card mt-2",children:e.jsxs("div",{className:"card-header flex justify-between px-[3rem] border py-3",children:[e.jsx("div",{className:"grid place-items-center text-[18px]",children:e.jsx("h1",{children:"Dispatch List"})}),e.jsxs("button",{type:"button",onClick:f,className:"bg-gray-700 p-2 text-white rounded-md flex space-x-2",children:[e.jsx("div",{className:"grid place-items-center mt-1",children:e.jsx(R,{})}),e.jsx("h1",{children:"Add Dispatch "})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"to Title                              "}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Note"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[v.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-3 text-left text-xs",children:s.dis_name}),e.jsx("td",{className:"px-6 py-3 text-left text-xs",children:s.dis_ref_no}),e.jsx("td",{className:"px-6 py-3 text-left text-xs",children:s.dis_date}),e.jsx("td",{className:"px-6 py-3 text-left text-xs",children:s.recv_form_title}),e.jsx("td",{className:"px-6 py-3 text-left text-xs",children:s.dis_address}),e.jsx("td",{className:"px-6 py-3 text-left text-xs",children:s.dis_note}),e.jsxs("td",{className:"px-6 py-3 text-left text-xs flex space-x-2",children:[e.jsx("a",{onClick:()=>{p({dis_name:s.dis_name,dis_address:s.dis_address,dis_atach_file:s.dis_atach_file,dis_date:s.dis_date,recv_form_title:s.recv_form_title,dis_note:s.dis_note,dis_ref_no:s.dis_ref_no}),m(s.id)},children:e.jsx(M,{className:"text-[1.3rem] cursor-pointer"})}),e.jsx("a",{onClick:a=>F(a,s.id),children:e.jsx(E,{className:"text-[1.1rem] cursor-pointer"})})]}),e.jsx("div",{id:`exampleModal-${s.id}`,className:x===s.id?"fixed h-screen transform  bg-black bg-opacity-85 shadow-md rounded-md   top-0 bottom-0 right-0 left-0 w-full grid place-items-center ":"fixed h-screen transform  bg-black bg-opacity-85 shadow-md rounded-md   top-0 bottom-0 right-0 left-0 w-full hidden place-items-center",children:e.jsx("div",{className:"back-model w-[60%] bg-white relative ",children:e.jsxs("div",{className:"modal-content w-full",children:[e.jsxs("div",{className:"modal-header flex justify-between   bg-[#0E99F4] p-2",children:[e.jsx("div",{className:"w-[80%]  px-4 mt-[0.29rem]",children:e.jsxs("h1",{className:"text-white text-[2rem]",children:["update Dispatch ",s.id]})}),e.jsx("button",{onClick:N,className:"ml-auto text-[2rem] text-white",children:e.jsx(g,{})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("form",{action:!0,className:"w-full grid grid-cols-2 gap-5 px-6 mt-10 relative",children:[e.jsxs("div",{className:"form-group w-full ",children:[e.jsx("label",{htmlFor:!0,children:" From title *"}),e.jsx("input",{onChange:l,name:"dis_name",value:t.dis_name,type:"text",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full ",children:[e.jsx("label",{htmlFor:!0,children:"Reference no"}),e.jsx("input",{onChange:l,name:"dis_ref_no",value:t.dis_ref_no,type:"text",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:" Date"})," ",e.jsx("br",{}),e.jsx("input",{onChange:l,name:"dis_date",value:t.dis_date,type:"date",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:" Next Follow Up DatePhone *"})," ",e.jsx("br",{}),e.jsx("input",{onChange:l,name:"recv_form_title",value:t.recv_form_title,type:"text",className:"w-full border-gray-300"})]})]}),e.jsxs("div",{className:"form-group w-full px-6 mt-3",children:[e.jsx("label",{htmlFor:!0,children:"Address"})," ",e.jsx("br",{}),e.jsx("textarea",{onChange:l,value:t.dis_address,name:"dis_address",type:"date",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full px-6 mt-3",children:[e.jsx("label",{htmlFor:!0,children:"Note"})," ",e.jsx("br",{}),e.jsx("textarea",{onChange:l,value:t.dis_note,name:"dis_note",type:"date",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full px-6",children:[e.jsx("label",{htmlFor:!0,children:"Atachment Files"})," ",e.jsx("br",{}),e.jsx("div",{class:"flex items-center justify-center w-full",children:e.jsxs("label",{for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-[2.5rem] border-2 border-gray-300 border-dashed  cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",children:[e.jsx("div",{class:"flex flex-col items-center justify-center mt-4",children:e.jsx("svg",{class:"w-8 h-8 mb-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})})}),e.jsx("input",{name:"dis_atach_file",onChange:u,id:"dropzone-file",type:"file",class:"hidden"})]})})]})]}),e.jsx("div",{className:"form-group   bottom-0  left-0 right-0 mt-10 py-4",children:e.jsx("div",{className:"flex justify-end px-5 p-3 space-x-3 w-full",children:e.jsx("button",{onClick:a=>C(a,s.id),className:"bg-gray-800 p-2 text-white w-[12%] ",children:"Save"})})})]})})},s.id)]})),e.jsx("tr",{children:e.jsx("td",{})})]})]})}),e.jsx("div",{id:"exampleModal",className:c?"  fixed h-screen transform  bg-black shadow-md rounded-md g  top-0 bottom-0 right-0 left-0 w-full hidden":"fixed h-screen transform  bg-black bg-opacity-85 shadow-md rounded-md   top-0 bottom-0 right-0 left-0 w-full grid place-items-center",children:e.jsx("div",{className:"back-model w-[60%] bg-white relative ",children:e.jsxs("div",{className:"modal-content w-full",children:[e.jsxs("div",{className:"modal-header flex justify-between   bg-[#0E99F4] p-2",children:[e.jsx("div",{className:"w-[80%]  px-4 mt-[0.29rem]",children:e.jsx("h1",{className:"text-white text-[2rem]",children:"Add Dispatch"})}),e.jsx("button",{onClick:f,className:"ml-auto text-[2rem] text-white",children:e.jsx(g,{})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("form",{action:!0,className:"w-full grid grid-cols-2 gap-5 px-6 mt-10 relative",children:[e.jsxs("div",{className:"form-group w-full ",children:[e.jsx("label",{htmlFor:!0,children:" From title *"}),e.jsx("input",{onChange:l,name:"dis_name",value:t.dis_name,type:"text",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full ",children:[e.jsx("label",{htmlFor:!0,children:"Reference no"}),e.jsx("input",{onChange:l,name:"dis_ref_no",value:t.dis_ref_no,type:"text",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:" Date"})," ",e.jsx("br",{}),e.jsx("input",{onChange:l,name:"dis_date",value:t.dis_date,type:"date",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:" Next Follow Up DatePhone *"})," ",e.jsx("br",{}),e.jsx("input",{onChange:l,name:"recv_form_title",value:t.recv_form_title,type:"text",className:"w-full border-gray-300"})]})]}),e.jsxs("div",{className:"form-group w-full px-6 mt-3",children:[e.jsx("label",{htmlFor:!0,children:"Address"})," ",e.jsx("br",{}),e.jsx("textarea",{onChange:l,value:t.dis_address,name:"dis_address",type:"date",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full px-6 mt-3",children:[e.jsx("label",{htmlFor:!0,children:"Note"})," ",e.jsx("br",{}),e.jsx("textarea",{onChange:l,value:t.dis_note,name:"dis_note",type:"date",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full px-6",children:[e.jsx("label",{htmlFor:!0,children:"Atachment Files"})," ",e.jsx("br",{}),e.jsx("div",{class:"flex items-center justify-center w-full",children:e.jsxs("label",{for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-[2.5rem] border-2 border-gray-300 border-dashed  cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",children:[e.jsx("div",{class:"flex flex-col items-center justify-center mt-4",children:e.jsx("svg",{class:"w-8 h-8 mb-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})})}),e.jsx("input",{name:"dis_atach_file",onChange:u,id:"dropzone-file",type:"file",class:"hidden"})]})})]})]}),e.jsx("div",{className:"form-group   bottom-0  left-0 right-0 mt-10 py-4",children:e.jsx("div",{className:"flex justify-end px-5 p-3 space-x-3 w-full",children:e.jsx("button",{onClick:k,className:"bg-gray-800 p-2 text-white w-[12%] ",children:"Save"})})})]})})})]})]})]})};export{V as default};
