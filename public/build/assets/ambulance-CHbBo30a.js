import{r,j as e,d as C}from"./app-C1sFr5Jl.js";import{S as k,H as S}from"./sidebar-BgpZ4ZOw.js";import{F as A}from"./index-Dz5fGuO7.js";import{R as D}from"./index-Cvp_4XLo.js";import{P}from"./patientsmodal-B4jBV9cr.js";import"./index-CL7JO-sE.js";import"./index-4ASejIE9.js";import"./sweetalert2.all-CfYHLfZw.js";const L=({admin:d,ambulanceLId:p})=>{const[n,j]=r.useState(!0),[c,g]=r.useState(!0),[f,b]=r.useState([]),[y,o]=r.useState([]),[l,N]=r.useState({}),[t,m]=r.useState({admin_type:d.type,admin_id:d.id,patient_id:"",vehicle_model_id:"",driver_name:"",date:"",tax:"",amount:"",charge_name:"",note:"",ambulance_category_id:"",discount:"",net_amount:"",payment_mode:"",bill_no:"",case_id:""}),s=a=>{const{name:i,value:_}=a.target;m({...t,[i]:_}),N({...l,[i]:""})},x=async()=>{try{const a=await axios.get("/api/admin/patient-fetch");b(a.data)}catch(a){console.error("Error fetching data:",a)}},v=async()=>{try{const a=await axios.post("/api/admin/ambulance-fetch-bill");console.log(a),o(a.data)}catch(a){console.error("Error fetching data:",a)}};r.useEffect(()=>{x(),v()},[]);const w=async a=>{a.preventDefault();try{await axios.post("/api/admin/ambulance-store-bill",t),m({vehicle_model_id:"",driver_name:"",date:"",tax:"",amount:"",charge_name:"",note:"",ambulance_category_id:"",discount:"",net_amount:"",payment_mode:"",bill_no:"",case_id:""}),o(),Swal.fire({icon:"success",title:"Success!",text:"Form submitted successfully!"})}catch(i){console.log(i)}},h=()=>{j(!n)},u=()=>{g(!c)};return e.jsxs("div",{className:"flex h-screen",children:[e.jsx("div",{className:"bg-gray-800 text-white w-[11%] flex-shrink-0",children:e.jsx(k,{})}),e.jsxs("div",{className:"flex-grow bg-gray-100 ",children:[e.jsx(S,{}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"card mt-2",children:e.jsxs("div",{className:"card-header flex justify-between px-[3rem] border py-3",children:[e.jsx("div",{className:"grid place-items-center text-[18px]",children:e.jsx("h1",{children:"Ambulance Call List"})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{type:"button",onClick:h,className:"bg-gray-700 p-2 text-white rounded-md flex space-x-2",children:[e.jsx("div",{className:"grid place-items-center mt-1",children:e.jsx(A,{})}),e.jsx("h1",{children:" Add Ambulance Call"})]}),e.jsx(C,{href:"/admin/ambulance-list",type:"button",className:"bg-gray-700 p-2 text-white rounded-md flex space-x-2",children:e.jsx("h1",{children:"  Ambulance List"})})]})]})}),e.jsx("div",{className:"",children:e.jsxs("table",{className:"table-auto min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Bill No"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Case ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle Model"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Driver Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Driver Contact No"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Patient Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Amount (Rs.)"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Paid Amount (Rs.)"}),e.jsx("th",{className:"px-6 py-3 text-left text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Balance Amount (Rs.)"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.bill_no}),e.jsx("td",{}),e.jsx("td",{children:a.name}),e.jsx("td",{children:a.vehicle_no}),e.jsx("td",{children:a.vehicle_model}),e.jsx("td",{children:a.d_name}),e.jsx("td",{children:a.d_contact}),e.jsx("td",{children:a.d_contact}),e.jsx("td",{children:a.date}),e.jsx("td",{children:a.amount})]}))})]})}),e.jsxs("div",{id:"exampleModal",className:n?"  fixed h-screen transform  bg-black shadow-md rounded-md g  top-0 bottom-0 right-0 left-0 w-full hidden":"fixed h-screen transform  bg-black bg-opacity-85 shadow-md rounded-md   top-0 bottom-0 right-0 left-0 w-full grid place-items-center",children:[e.jsx("div",{className:"back-model w-[60%] bg-white relative ",children:e.jsxs("div",{className:"modal-content w-full",children:[e.jsxs("div",{className:"modal-header grid grid-cols-2  bg-[#0E99F4] p-2",children:[e.jsxs("div",{className:"w-[80%] ",children:[e.jsxs("div",{className:"w-[80%] flex space-x-2 px-4 mt-[0.29rem]",children:[e.jsxs("select",{value:t.patient_id,onChange:s,name:"patient_id",id:!0,className:"w-[100%] h-9",children:[e.jsx("option",{value:"",children:"Select Patient"}),f.map(a=>e.jsx("option",{value:a.id,children:a.name}))]}),e.jsxs("button",{onClick:u,className:"bg-gray-700 w-[100%] h-9  text-white rounded-md",children:[" ",e.jsx("i",{className:"fa-solid fa-plus"}),"Add Patient"]})]}),l.patient_id&&e.jsx("span",{className:"text-red-500",children:l.patient_id})]}),e.jsx("div",{className:"flex mt-[0.40rem]",children:e.jsx("button",{onClick:h,className:"ml-auto text-[2rem] text-white",children:e.jsx(D,{})})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"w-full grid grid-cols-4 gap-3 px-6 mt-10 relative",children:[e.jsxs("div",{className:"form-group w-full ",children:[e.jsx("label",{htmlFor:!0,children:" Vehicle Model * *"}),e.jsxs("select",{value:t.vehicle_model_id,onChange:s,name:"vehicle_model_id",id:!0,className:"w-full border-gray-300",children:[e.jsx("option",{value:"",children:"Select Vehicle Model *"}),p.map(a=>e.jsx("option",{value:a.id,children:a.vehicle_no}))]}),l.Medicine_Category&&e.jsx("span",{className:"text-red-500",children:l.Medicine_Category})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"	Driver Name"})," ",e.jsx("br",{}),e.jsx("input",{value:t.driver_name,onChange:s,name:"driver_name",type:"text",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"	Date"})," ",e.jsx("br",{}),e.jsx("input",{value:t.date,onChange:s,name:"date",type:"datetime-local",className:"w-full border-gray-300"})]}),e.jsxs("div",{className:"form-group w-full ",children:[e.jsx("label",{htmlFor:!0,children:" Charge Category *"}),e.jsxs("select",{value:t.ambulance_category_id,onChange:s,name:"ambulance_category_id",className:"w-full border-gray-300",children:[e.jsx("option",{value:"",children:"Charge Category *"}),e.jsx("option",{value:"1",children:"private"})]}),l.Medicine_Name&&e.jsx("span",{className:"text-red-500",children:l.Medicine_Name})]}),e.jsxs("div",{className:"form-group w-full ",children:[e.jsx("label",{htmlFor:!0,children:"	Charge Name *"}),e.jsxs("select",{value:t.charge_name,onChange:s,name:"charge_name",id:!0,className:"w-full border-gray-300",children:[e.jsx("option",{value:!0,children:"Select Charge Name"}),e.jsx("option",{value:"ff",children:"ddd"})]}),l.Batch_No&&e.jsx("span",{className:"text-red-500",children:l.Batch_No})]}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"Standard Charge ($) *"})," ",e.jsx("br",{}),e.jsx("input",{value:t.net_amount,onChange:s,name:"net_amount",type:"text",className:"w-full border-gray-300"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 px-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-2 gap-3"}),e.jsxs("div",{className:"form-group  mt-4 w-full ",children:[e.jsx("label",{htmlFor:!0,children:"Note"})," ",e.jsx("br",{}),e.jsx("textarea",{value:t.note,onChange:s,name:"note",id:!0,rows:3,className:"px-6 w-full border-gray-300",defaultValue:""})]})]}),e.jsxs("div",{className:"content mt-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{children:"Total (Rs.)"}),e.jsx("input",{value:t.Total,onChange:s,name:"Total",type:"text",defaultValue:2e3,className:"border-t-0 border-l-0 border-r-0 border-gray-300"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{children:"Discount (Rs.)"}),e.jsx("input",{value:t.discount,onChange:s,name:"discount",type:"text",defaultValue:2e3,className:"border-t-0 border-l-0 border-r-0 border-gray-300"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{children:"Tax (Rs.) "}),e.jsx("input",{value:t.tax,onChange:s,name:"tax",type:"text",defaultValue:2e3,className:"border-t-0 border-l-0 border-r-0 border-gray-300"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{children:"Net Amount (Rs.)"}),e.jsx("input",{value:t.amount,onChange:s,name:"amount",type:"text",defaultValue:2e3,className:"border-t-0 border-l-0 border-r-0 border-gray-300"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"form-group w-full border-gray-300 mt-6",children:e.jsxs("select",{name:"payment_mode",onChange:s,value:t.payment_mode,className:" border-gray-300 w-full",children:[e.jsx("option",{value:"",children:"Select payment"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Credit Card",children:"Credit Card"}),e.jsx("option",{value:"Debit Card",children:"Debit Card"})]})}),e.jsxs("div",{className:"form-group w-full",children:[e.jsx("label",{htmlFor:!0,children:"Amount (Rs.) *"})," ",e.jsx("br",{}),e.jsx("input",{value:t.net_amount,onChange:s,name:"net_amount",type:"text",className:"w-full border-gray-300"})]})]})]})]}),e.jsx("div",{className:"form-group   bottom-0  left-0 right-0 mt-10 py-4",children:e.jsx("div",{className:"flex justify-end px-5 p-3 space-x-3 w-full",children:e.jsx("button",{onClick:w,className:"bg-gray-800 p-2 text-white w-[12%] ",children:"Save"})})})]})}),e.jsx(P,{Patientsmodal:c,handlePatients:u,fetchData:x})]})]})]})]})};export{L as default};
